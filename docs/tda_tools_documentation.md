# TDA Tools Documentation

This document describes a suite of tools for Topological Data Analysis (TDA), designed to analyze the structure of point cloud data and graphs. These tools are particularly useful for analyzing the emergent knowledge graph in the FUM project.

## Overview

The TDA toolkit consists of three main functions:

1.  `construct_vietoris_rips`: Constructs a Vietoris-Rips complex from a set of points.
2.  `compute_persistent_homology`: Computes the persistent homology of a point cloud or distance matrix.
3.  `calculate_tda_metrics`: Calculates specific TDA metrics (Total B1 Persistence, Component Count) from persistence diagrams.

## Requirements

- Python 3.6+
- NumPy
- SciPy
- ripser

## `construct_vietoris_rips`

### Purpose

This function constructs a Vietoris-Rips (VR) complex, which is a way of forming a topological space from a set of points. The VR complex is built by connecting points that are within a certain distance of each other.

### Function Signature

```python
def construct_vietoris_rips(
    points: np.ndarray, 
    max_edge_length: float,
    max_dim: int = 2
) -> List[Tuple[Union[int, Tuple[int, ...]], float]]:
```

### Parameters

- **points**: A numpy array of shape `(n_points, n_features)`.
- **max_edge_length**: The maximum distance for two points to be connected by an edge.
- **max_dim**: The maximum dimension of simplices to include in the complex.

## `compute_persistent_homology`

### Purpose

This function computes the persistent homology of a dataset. Persistent homology is a method for identifying topological features (like connected components, loops, and voids) at different spatial resolutions.

### Function Signature

```python
def compute_persistent_homology(
    points: np.ndarray, 
    max_dim: int = 1
) -> Dict[str, np.ndarray]:
```

### Parameters

- **points**: A numpy array of shape `(n_points, n_features)` or a distance matrix of shape `(n_points, n_points)`.
- **max_dim**: The maximum dimension of homology to compute (e.g., 0 for components, 1 for loops).

### Returns

A dictionary containing the persistence diagrams (`dgms`) and the distance matrix (`dists`).

## `calculate_tda_metrics`

### Purpose

This function calculates specific TDA metrics from the persistence diagrams generated by `compute_persistent_homology`. These metrics are designed to quantify the "health" and "efficiency" of the FUM knowledge graph.

### Function Signature

```python
def calculate_tda_metrics(
    persistence_diagrams: List[np.ndarray]
) -> Dict[str, float]:
```

### Parameters

- **persistence_diagrams**: A list of persistence diagrams, as returned by `ripser`.

### Returns

A dictionary with the following metrics:
- **`component_count`**: The number of connected components in the data.
- **`total_b1_persistence`**: The sum of the "lifetimes" of all the 1-dimensional loops, a measure of the cyclic complexity of the data.
